<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VotaÃ§Ã£o Natalina â€” Torre 4</title>
  <meta name="description" content="Envie sua foto de decoraÃ§Ã£o de Natal e vote nas preferidas da Torre 4."/>
  <link rel="icon" type="image/png" href="https://api.iconify.design/emojione/christmas-tree.svg">
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#dc2626">
  <link rel="apple-touch-icon" href="https://api.iconify.design/noto/christmas-tree.svg?width=180&height=180">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .xmas-card {
      background-image:
        radial-gradient(circle at 10% 10%, rgba(255,255,255,.35) 0 20%, transparent 21%),
        radial-gradient(circle at 90% 20%, rgba(255,255,255,.25) 0 16%, transparent 17%);
      background-color:#fff;
    }
    .twinkle { box-shadow: 0 0 0 2px rgba(255,255,255,.1), 0 0 24px rgba(220,38,38,.25) inset; }
  </style>
</head>
<body class="bg-gradient-to-b from-red-50 via-white to-emerald-50 min-h-screen relative overflow-x-hidden">

  <!-- â„ï¸ Canvas de neve -->
  <canvas id="snow" class="pointer-events-none fixed inset-0 -z-10"></canvas>

  <!-- ğŸµ Ãudio bg (WAV para compatibilidade sem codecs extras) -->
  <audio id="bgMusic" src="./assets/jingle-bells.wav" loop preload="auto"></audio>

  <!-- ğŸ„ Header natalino -->
  <header class="bg-gradient-to-r from-red-700 via-red-600 to-emerald-700 text-white twinkle">
    <div class="max-w-5xl mx-auto px-4 py-4 flex flex-col md:flex-row items-center gap-3 justify-between">
      <h1 class="text-xl md:text-2xl font-extrabold tracking-wide">
        ğŸ„ VotaÃ§Ã£o Natalina da Torre 4
      </h1>
      <div class="flex items-center gap-2 flex-wrap justify-center">
        <!-- BotÃµes de controle -->
        <button id="snowToggle" class="px-3 py-2 bg-white/20 hover:bg-white/30 border border-white/40 rounded-lg transition-all" title="Alternar neve">
          â„ï¸ <span class="hidden md:inline">Neve</span>
        </button>
        <button id="sparkleToggle" class="px-3 py-2 bg-white/20 hover:bg-white/30 border border-white/40 rounded-lg transition-all" title="Alternar brilho">
          âœ¨ <span class="hidden md:inline">Brilho</span>
        </button>
        <button id="musicToggle" class="px-3 py-2 bg-white/20 hover:bg-white/30 border border-white/40 rounded-lg transition-all" title="Alternar mÃºsica">
          ğŸ”” <span class="hidden md:inline">MÃºsica</span>
        </button>
        
        <!-- Login/Logout -->
        <span id="userInfo" class="text-sm opacity-90 mr-1"></span>
        <button id="loginBtn" class="px-3 py-2 bg-white text-red-700 hover:bg-red-50 rounded-lg font-medium transition-all">Entrar com Google</button>
        <button id="logoutBtn" class="px-3 py-2 bg-white/20 border border-white/40 rounded-lg hidden hover:bg-white/30 transition-all">Sair</button>
      </div>
    </div>
  </header>

  <!-- âœ¨ Hero -->
  <section class="bg-gradient-to-b from-red-100 via-emerald-50 to-white py-8">
    <div class="max-w-5xl mx-auto px-4">
      <div class="text-center space-y-4">
        <h2 class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-red-600 to-emerald-600" style="font-family: 'Brush Script MT', cursive;">
          VotaÃ§Ã£o Natalina da Torre 4
        </h2>
        <p class="text-lg text-slate-700 max-w-2xl mx-auto" style="font-family: 'Segoe Script', cursive;">
          Envie sua foto e vote na decoraÃ§Ã£o mais linda! ğŸ
        </p>
      </div>
    </div>
  </section>

  <main class="max-w-5xl mx-auto px-4 py-6 space-y-8">
    <div id="periodoAviso" class="hidden p-3 rounded-lg bg-yellow-100 text-yellow-900 text-sm"></div>

    <!-- Form de Upload -->
    <section class="xmas-card rounded-2xl shadow-lg p-6 border-2 border-emerald-200">
      <h2 class="text-2xl font-bold mb-4 text-emerald-700 flex items-center gap-2">
        ğŸ“¸ <span style="font-family: 'Segoe Script', cursive;">Enviar foto</span>
      </h2>
      <form id="formUpload" class="grid md:grid-cols-4 gap-4">
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Andar</label>
          <select id="andar" required class="w-full border-2 border-slate-300 focus:border-emerald-500 rounded-lg px-3 py-2 transition-colors">
            <option value="">Selecione o andar</option>
            <option value="1">1Âº andar</option>
            <option value="2">2Âº andar</option>
            <option value="3">3Âº andar</option>
            <option value="4">4Âº andar</option>
            <option value="5">5Âº andar</option>
            <option value="6">6Âº andar</option>
            <option value="7">7Âº andar</option>
            <option value="8">8Âº andar</option>
            <option value="9">9Âº andar</option>
            <option value="10">10Âº andar</option>
            <option value="11">11Âº andar</option>
            <option value="12">12Âº andar</option>
            <option value="13">13Âº andar</option>
            <option value="14">14Âº andar</option>
            <option value="15">15Âº andar</option>
            <option value="16">16Âº andar</option>
            <option value="17">17Âº andar</option>
            <option value="18">18Âº andar</option>
            <option value="19">19Âº andar</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Apartamento</label>
          <select id="apartamento" required disabled class="w-full border-2 border-slate-300 focus:border-emerald-500 rounded-lg px-3 py-2 transition-colors disabled:bg-slate-100 disabled:cursor-not-allowed">
            <option value="">Selecione o andar primeiro</option>
          </select>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm font-medium text-slate-700 mb-1">Foto (jpg/png)</label>
          <input type="file" id="foto" accept="image/*" required class="w-full border-2 border-slate-300 focus:border-emerald-500 rounded-lg px-3 py-2 transition-colors">
        </div>
        <button type="submit" class="md:col-span-4 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-bold rounded-lg px-6 py-3 shadow-lg hover:shadow-xl transition-all transform hover:scale-105">
          ğŸ„ Enviar Foto
        </button>
      </form>
      <p id="msg" class="text-sm mt-3 font-medium"></p>
    </section>

    <!-- BotÃµes de aÃ§Ã£o -->
    <section class="xmas-card rounded-2xl shadow-lg p-4 flex flex-wrap gap-3 justify-center items-center border-2 border-slate-200">
      <a href="./ranking.html" class="px-6 py-3 rounded-lg bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white font-bold shadow-lg hover:shadow-xl transition-all transform hover:scale-105">
        ğŸ† Ver Ranking Completo
      </a>
    </section>

    <!-- Galeria de DecoraÃ§Ãµes -->
    <section>
      <h2 class="text-2xl font-bold text-center mb-4 text-emerald-700">ğŸ„ Galeria de DecoraÃ§Ãµes</h2>
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6" id="galeria"></div>
    </section>
  </main>

  <footer class="relative bg-gradient-to-r from-green-200 via-red-200 to-green-200 border-t border-green-400 py-8">
    <!-- Corda decorativa -->
    <div class="absolute top-0 left-0 right-0 h-4 bg-gradient-to-r from-red-700 via-red-600 to-emerald-700 flex items-center justify-around overflow-hidden">
      <span class="text-yellow-300 text-xl animate-pulse">ğŸ„</span>
      <span class="text-yellow-300 text-xl animate-pulse" style="animation-delay: 0.3s;">â­</span>
      <span class="text-yellow-300 text-xl animate-pulse" style="animation-delay: 0.6s;">ğŸ</span>
      <span class="text-yellow-300 text-xl animate-pulse" style="animation-delay: 0.9s;">ğŸ””</span>
      <span class="text-yellow-300 text-xl animate-pulse" style="animation-delay: 1.2s;">ğŸ„</span>
      <span class="text-yellow-300 text-xl animate-pulse" style="animation-delay: 0.4s;">â­</span>
      <span class="text-yellow-300 text-xl animate-pulse" style="animation-delay: 0.7s;">ğŸ</span>
      <span class="text-yellow-300 text-xl animate-pulse" style="animation-delay: 1s;">ğŸ””</span>
    </div>
    <div class="max-w-5xl mx-auto px-4 flex flex-col md:flex-row items-center justify-between gap-4 mt-2">
      <!-- QR Code -->
      <div class="flex flex-col items-center gap-2">
        <a href="https://natal-votacao-atual.vercel.app" target="_blank" rel="noopener noreferrer" class="block">
          <div class="bg-white p-3 rounded-lg shadow-md border-2 border-emerald-600 hover:border-emerald-500 transition-all hover:shadow-lg">
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=https://natal-votacao-atual.vercel.app" alt="QR Code" class="w-28 h-28">
          </div>
        </a>
        <a href="https://natal-votacao-atual.vercel.app" target="_blank" rel="noopener noreferrer" class="text-xs text-emerald-700 font-medium hover:text-emerald-600 hover:underline">
          Acesse pelo celular
        </a>
      </div>
      
      <!-- CrÃ©ditos -->
      <div class="text-center text-xs text-slate-600 leading-relaxed">
        <p>Â© Todos os direitos reservados 2025</p>
        <p>Desenvolvido por <span class="font-semibold text-emerald-700">JÃ©ssica Maria de Sousa</span></p>
        <p class="text-red-600 font-medium">ComissÃ£o de Natal - Torre 4</p>
      </div>
    </div>
  </footer>

  <!-- ğŸª„ Modal de consentimento para mÃºsica -->
  <div id="musicModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-20 hidden">
    <div class="bg-white rounded-2xl shadow-xl w-[95%] max-w-md p-5 text-center space-y-3">
      <div class="text-2xl">ğŸ¶</div>
      <h3 class="text-lg font-semibold">Entrar no clima?</h3>
      <p class="text-sm text-slate-600">Podemos tocar uma trilha natalina de fundo. VocÃª pode mudar isso quando quiser.</p>
      <div class="flex gap-2 justify-center pt-2">
        <button id="modalPlay" class="px-4 py-2 rounded-lg bg-emerald-600 text-white">Tocar mÃºsica</button>
        <button id="modalNo" class="px-4 py-2 rounded-lg border">Agora nÃ£o</button>
      </div>
    </div>
  </div>

  <script src="./js/firebase.js"></script>
  <script src="./js/app.js"></script>
  <script src="./js/theme.js"></script>
  <script>
    // Registra Service Worker para PWA
    if('serviceWorker' in navigator){
      window.addEventListener('load',()=>navigator.serviceWorker.register('./sw.js').catch(()=>{}));
    }
  </script>
</body>
</html>
